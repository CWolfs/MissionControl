(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{186:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"metadata",(function(){return c})),n.d(t,"default",(function(){return u}));var a=n(2),o=n(6),r=(n(0),n(277)),i={id:"setup",title:"Setup",sidebar_label:"Setup"},l=[{value:"Create a contract type enum entry",id:"create-a-contract-type-enum-entry",children:[]},{value:"Create an encounter layer",id:"create-an-encounter-layer",children:[]},{value:"Create a contract type build",id:"create-a-contract-type-build",children:[]},{value:"(Optional) Add an Encounter Ruleset for your contract type",id:"optional-add-an-encounter-ruleset-for-your-contract-type",children:[{value:"If you don't want to use Random Spawns & Additional Lances",id:"if-you-dont-want-to-use-random-spawns--additional-lances",children:[]},{value:"If you want to use Random Spawns & Additional Lances, but don't want to create an Encounter Ruleset",id:"if-you-want-to-use-random-spawns--additional-lances-but-dont-want-to-create-an-encounter-ruleset",children:[]},{value:"If you're willing to create an Encounter Ruleset for more control",id:"if-youre-willing-to-create-an-encounter-ruleset-for-more-control",children:[]}]}],c={id:"contract-builder/setup",title:"Setup",description:"To set up a custom contract type you need to do the following:\r",source:"@site/docs\\contract-builder\\setup.md",permalink:"/docs/contract-builder/setup",sidebar_label:"Setup",sidebar:"docs",previous:{title:"Overview",permalink:"/docs/contract-builder/overview"},next:{title:"Understanding Structure",permalink:"/docs/contract-builder/structure"}},s={rightToc:l,metadata:c};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"To set up a custom contract type you need to do the following:"),Object(r.b)("h2",{id:"create-a-contract-type-enum-entry"},"Create a contract type enum entry"),Object(r.b)("p",null,"Either:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Edit and add a contract type entry to ",Object(r.b)("inlineCode",{parentName:"li"},"MissionControl/overrides/enums/ContractType.json")),Object(r.b)("li",{parentName:"ul"},"In your mod, merge a contract type as a ",Object(r.b)("inlineCode",{parentName:"li"},"DataAddendumEntries")," for ",Object(r.b)("inlineCode",{parentName:"li"},"ContractTypeEnumeration"))),Object(r.b)("p",null,"Add an entry like the following example, but changing what you require:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'  {\n    "ID" : 10000,  // ID must be unique and not clash with another contract type. Used in the below encounter layer.\n    "Name" : "SoloDuel", // Name must be unique and is used as an identifier in contract overrides JSON\n    "FriendlyName" : "Solo Duel", // Doesn\'t need to be unique. Allows contract type stacking. Name used in the game UI\n    "Version" : 0, // Has no real purpose except for a loose version control\n    "IsSinglePlayerProcedural" : true, // Is true, use for the typical contracts that pop up. false for story/restoration\n    "IsStory" : false, // Used for story missions\n    "IsRestoration" : false, // Used for restoration missions (which are the same as story really)\n    "CustomMusic" : null, // string value from `AudioState_Music_State` enum\n    "IsMultiplayer" : false, // Not important for custom contracts.\n    "UsesFury" : false, // Is meant to use fury instead of morale. Untested.\n    "UsesSecondScaledStructureValues" : false, // Unsure of this\n    "ContractRewardMultiplier" : 1, // Multipler for contract reward (of course!)\n    "Illustration" : "uixTxrSpot_battleContract", // Large image in the UI for the contract type\n    "Icon" : "uixSvgIcon_contract_Battle", // Icon used for the contract type\n    "IsPublished" : true // This must be true, otherwise the contract type won\'t be available to use\n  },\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"NOTE"),": Mission Control will continue to add contract types under the ",Object(r.b)("inlineCode",{parentName:"p"},"10000")," to ",Object(r.b)("inlineCode",{parentName:"p"},"11000")," range. You ",Object(r.b)("strong",{parentName:"p"},"MUST")," select a different range to Mission Control, and other modders, when selecting a range of IDs to create."),Object(r.b)("h2",{id:"create-an-encounter-layer"},"Create an encounter layer"),Object(r.b)("p",null,"Either use Mission Control's system, or create your own to add an encounter layer entry into the MDD. ",Object(r.b)("strong",{parentName:"p"},"This is not covered by ModTek versions earlier than v2.0"),"."),Object(r.b)("p",null,"If using Mission Control's system:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Create a folder with your contract type name under ",Object(r.b)("inlineCode",{parentName:"li"},"MissionControl/overrides/encounterLayers"),". For example, if your contract type is called ",Object(r.b)("inlineCode",{parentName:"li"},"Invasion")," then call it ",Object(r.b)("inlineCode",{parentName:"li"},"invasion"),".")),Object(r.b)("p",null,"If using ModTek v2.0+,"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"In your mod's mod.json, add a new ",Object(r.b)("inlineCode",{parentName:"li"},"Manifest")," entry called ",Object(r.b)("inlineCode",{parentName:"li"},"EncounterLayer")," that has a ",Object(r.b)("inlineCode",{parentName:"li"},"Path")," to your folder that contains your encounter layers. e.g.")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'"Manifest": [\n  { "Type": "EncounterLayer", "Path": "overrides/encounterLayers" }\n]\n')),Object(r.b)("p",null,"For both approaches:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"For the map you wish your contract type to be playable on, you must create a json file here."),Object(r.b)("li",{parentName:"ul"},"Name the file ",Object(r.b)("inlineCode",{parentName:"li"},"encounterLayer_{contractTypeName}.{mapName}.json"),", for example ",Object(r.b)("inlineCode",{parentName:"li"},"encounterLayer_soloDuel.mapStory_StoryEncounter3_mMoon_craters")),Object(r.b)("li",{parentName:"ul"},"Any IDs that looks like ",Object(r.b)("inlineCode",{parentName:"li"},"73b9ebfe-b62b-4ffb-87b9-a0191d2530b3")," are ",Object(r.b)("inlineCode",{parentName:"li"},"uuid v4"),". You can generate these easily by visiting ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.uuidgenerator.net/"}),"https://www.uuidgenerator.net/"))),Object(r.b)("p",null,"Inside the file add the following, but changing what you require:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "EncounterLayerID": "mapArena_deathValley_aDes.73b9ebfe-b62b-4ffb-87b9-a0191d2530b3", // Unique ID as {mapName}.{UUIDv4}\n  "MapID": "mapArena_deathValley_aDes", // Map ID as referenced in the `Maps` table in the MDD\n  "Name": "encMC_SoloDuel_OpenArea", // Custom name unique to your encounter. encGeneral is used for vanilla. encMC for MC.\n  "FriendlyName": "Solo Duel - Open Area", // Displayed only in BT\'s debug contract selector\n  "Description": "Player must kill the duel target.", // Only used here\n  "BattleValue": "0", // Always \'0\', even for vanilla\n  "ContractTypeID": "10000", // Cross referenced ID with your above contract type enum\n  "EncounterLayerGUID": "73b9ebfe-b62b-4ffb-87b9-a0191d2530b3", // Unique UUIDv4. Must be the same as the other UUIDs in this file\n  "TagSetID": "mapArena_deathValley_aDes.73b9ebfe-b62b-4ffb-87b9-a0191d2530b3", // Same ID as \'EncounterLayerID\' above\n  "IncludeInBuild": "1" // Must be \'1\' otherwise the contract type won\'t be available to use\n}\n')),Object(r.b)("h2",{id:"create-a-contract-type-build"},"Create a contract type build"),Object(r.b)("p",null,"The contract type build file creates the actual encounter in the select map. Mission Control loads a map and dynamically builds the entire contract type up from nothing."),Object(r.b)("p",null,"I highly recommend before creating a contract type build file you look through the Mission Control ",Object(r.b)("inlineCode",{parentName:"p"},"SoloDuel")," contract type as an very simple example."),Object(r.b)("p",null,"A contract type build for a contract type consists of two elements:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"A ",Object(r.b)("inlineCode",{parentName:"li"},"common.jsonc")," file which outlays all the general elements and logic for the contract type"),Object(r.b)("li",{parentName:"ul"},"For every map the contract type is set up to run on a ",Object(r.b)("inlineCode",{parentName:"li"},".jsonc")," for map specific settings (most often positions and rotations), for example ",Object(r.b)("inlineCode",{parentName:"li"},"deathvalley_desert_open_area.jsonc")," (the name can be anything you want but it's a good idea to include the map name, biome and any other specifier)")),Object(r.b)("p",null,"An important aspect of the ",Object(r.b)("inlineCode",{parentName:"p"},"common.jsonc")," is that it has a ",Object(r.b)("inlineCode",{parentName:"p"},"Key")," property which is the contract type ",Object(r.b)("inlineCode",{parentName:"p"},"Name")," from the above contract type enum created."),Object(r.b)("p",null,"An important aspect of the map specific files is that it contains an ",Object(r.b)("inlineCode",{parentName:"p"},"EncounterLayerId")," which is the ",Object(r.b)("inlineCode",{parentName:"p"},"EncounterLayerId")," from the above created encounter layer. The format of overrides is the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.newtonsoft.com/json/help/html/QueryJsonSelectTokenJsonPath.htm"}),"Json.NET query/select system"),"."),Object(r.b)("p",null,"Tutorials and guides will be made soon to cover this in more detail."),Object(r.b)("h2",{id:"optional-add-an-encounter-ruleset-for-your-contract-type"},"(Optional) Add an Encounter Ruleset for your contract type"),Object(r.b)("p",null,"This step is optional, however, with some special conditions."),Object(r.b)("h3",{id:"if-you-dont-want-to-use-random-spawns--additional-lances"},"If you don't want to use Random Spawns & Additional Lances"),Object(r.b)("p",null,"If you're not using ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../features/random-spawns"}),"random spawns")," or ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../features/additional-lances"}),"additional lances")," then you won't need to create this."),Object(r.b)("h3",{id:"if-you-want-to-use-random-spawns--additional-lances-but-dont-want-to-create-an-encounter-ruleset"},"If you want to use Random Spawns & Additional Lances, but don't want to create an Encounter Ruleset"),Object(r.b)("p",null,"If you do not want to create an Encounter Ruleset and still want Random Spawns or Additional Lances to work you ",Object(r.b)("strong",{parentName:"p"},"must")," following the following convention:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Name your Player spawner ",Object(r.b)("inlineCode",{parentName:"li"},"Spawner_PlayerLance")),Object(r.b)("li",{parentName:"ul"},"Name your main opposing force spawner ",Object(r.b)("inlineCode",{parentName:"li"},"Lance_Enemy_OpposingForce"))),Object(r.b)("h3",{id:"if-youre-willing-to-create-an-encounter-ruleset-for-more-control"},"If you're willing to create an Encounter Ruleset for more control"),Object(r.b)("p",null,"As described in the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/features/encounter-rulesets"}),"encounter rulesets")," section, you can submit an ",Object(r.b)("inlineCode",{parentName:"p"},"EncounterRuleset")," to Mission Control to better control the features of Mission Control with your contract type."),Object(r.b)("p",null,"These features can be things like:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Specifying where you want the Additional Lances to spawn around"),Object(r.b)("li",{parentName:"ul"},"Specifying how any of the lance spawners in the contract type will randomise their spawn, for example",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Using a ",Object(r.b)("inlineCode",{parentName:"li"},"SpawnLanceAtEdgeBoundary")," to spawn the player lance on the boundary of the map"),Object(r.b)("li",{parentName:"ul"},"Using a ",Object(r.b)("inlineCode",{parentName:"li"},"SpawnLanceAnywhere")," to ensure an enemy reinforcement lance is spawned randomly anywhere, but at least within 10 hexs of the player lance"),Object(r.b)("li",{parentName:"ul"},"Using a ",Object(r.b)("inlineCode",{parentName:"li"},"LookAtTarget")," to ensure a lance is looking at a target"))),Object(r.b)("li",{parentName:"ul"},"Any other custom logic you wish to run using any custom rules you want")),Object(r.b)("p",null,"To implement this, follow the guide in the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/features/encounter-rulesets"}),"encounter rulesets")," section."))}u.isMDXComponent=!0},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(0),o=n.n(a),r=o.a.createContext({}),i=function(e){var t=o.a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},l=function(e){var t=i(e.components);return o.a.createElement(r.Provider,{value:t},e.children)};var c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},s=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),u=i(n),b=a,p=u[l+"."+b]||u[b]||c[b]||r;return n?o.a.createElement(p,Object.assign({},{ref:t},s,{components:n})):o.a.createElement(p,Object.assign({},{ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=s;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<r;u++)i[u]=n[u];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"}}]);